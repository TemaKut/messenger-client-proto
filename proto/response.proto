syntax = "proto3";

package messenger;

import "user/user.proto";
import "user/auth.proto";
import "google/protobuf/timestamp.proto";

option go_package = "github.com/TemaKut/messenger-client-proto/gen/go";


message Response {
  string id = 1; // id from request
  google.protobuf.Timestamp server_time = 2;

  reserved 3 to 10;

  oneof source {
    Error error = 11;
    Success success = 12;
  }
}

message Success {
  oneof data {
    UserRegisterResponse user_register = 1;
    UserAuthorizeResponse user_authorize = 2;
  }
}

message UserRegisterResponse {
  messenger.user.User user = 1;
}

message UserAuthorizeResponse {
  messenger.user.AuthParams auth_params = 1;
}

message Error {
  ErrorReason reason = 1;
  string description = 2;
}

enum ErrorReason {
  ERROR_REASON_UNKNOWN = 0;

  ERROR_REASON_REQUEST_HAS_NO_ID = 1;
  ERROR_REASON_REQUEST_VALIDATE = 2;

  ERROR_REASON_USER_EMAIL_ALREADY_EXISTS = 3;
}